(function(){!function(a,b){var c;return c=function(){function a(a,b){this.element=a,this.number_of_millisecond_in_a_year=31556926e3,this.birthday=new Date(b).getTime(),this.age=0,this.fraction=0,this.precision=9,this.initialise()}return a.prototype.initialise=function(){var a;return this.initDisplay(),a=this,setInterval(function(){return a.updateDisplay()},10)},a.prototype.calculateAge=function(){return this.age=Math.floor(((new Date).getTime()-this.birthday)/this.number_of_millisecond_in_a_year),this.birthday+=this.age*this.number_of_millisecond_in_a_year},a.prototype.calculateFraction=function(){return this.fraction=(1e9*(((new Date).getTime()-this.birthday)/this.number_of_millisecond_in_a_year).toFixed(this.precision)).toString()},a.prototype.initDisplay=function(){return this.ageDisplay=b.createElement("span"),this.fractionDisplay=b.createElement("span"),this.element.insertBefore(this.ageDisplay,null),this.element.insertBefore(this.fractionDisplay,null),this.calculateAge(),this.ageDisplay.innerHTML=this.age,this.updateDisplay()},a.prototype.updateDisplay=function(){return this.calculateFraction(),this.fractionDisplay.innerHTML="."+this.pad()},a.prototype.pad=function(){return this.fraction.length<this.precision?(this.fraction="0"+this.fraction,this.pad()):this.fraction},a}(),a.Age=c}(window,document)}).call(this),function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};!function(b,c){var d,e,f,g,h,i,j,k;return h=function(a){return new RegExp("(^|\\s+)"+a+"(\\s+|$)")},a.call(c.documentElement,"classList")>=0?(j=function(a,b){return a.classList.contains(b)},g=function(a,b){return a.classList.add(b)},k=function(a,b){return a.classList.remove(b)}):(j=function(a,b){return h(b).test(a.className)},g=function(a,b){return j(a,b)?void 0:a.className=a.className+" "+b},k=function(a,b){return a.className=a.className.replace(h(b)," ")}),i={hasClass:j,addClass:g,removeClass:k},b.classie=i,f="CirclesUI",e={relativeInput:!1,clipRelativeInput:!1,invertX:!1,invertY:!1,limitX:!1,limitY:!1,scalarX:1,scalarY:1,frictionX:.1,frictionY:.1,precision:1,classBig:"circle-big",classVisible:"circle-visible"},d=function(){function a(a,d){var f,h;if(this.element=a,this.circles=a.getElementsByClassName("circle-container"),this.circles.length<24)throw new Error("Not enought circle to display a proper UI");f={relativeInput:this.data(this.element,"relative-input"),clipRelativeInput:this.data(this.element,"clipe-relative-input"),invertX:this.data(this.element,"invert-x"),invertY:this.data(this.element,"invert-y"),limitX:this.data(this.element,"limit-x"),limitY:this.data(this.element,"limit-y"),scalarX:this.data(this.element,"scalar-x"),scalarY:this.data(this.element,"scalar-y"),frictionX:this.data(this.element,"friction-x"),frictionY:this.data(this.element,"friction-y"),precision:this.data(this.element,"precision"),classBig:this.data(this.element,"class-big"),classVisible:this.data(this.element,"class-visible")};for(h in f)null===f[h]&&delete f[h];this.extend(this,e,d,f),this.enabled=!1,this.raf=null,this.moved=!1,this.bounds=null,this.ex=0,this.ey=0,this.ew=0,this.eh=0,this.portrait=null,this.ww=0,this.wh=0,this.circleDiameter=0,this.numberOfCol=0,this.numberOfRow=0,this.miny=0,this.maxy=0,this.minx=0,this.maxx=0,this.cy=0,this.cx=0,this.ry=this.maxy-this.miny,this.rx=this.maxx-this.minx,this.fix=0,this.fiy=0,this.ix=0,this.iy=0,this.mx=0,this.my=0,this.vx=0,this.vy=0,this.vendorPrefix=function(){var a,d,e;return e=b.getComputedStyle(c.documentElement,""),d=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1],a="WebKit|Moz|MS|O".match(new RegExp("("+d+")","i"))[1],{dom:a,lowercase:d,css:"-"+d+"-",js:d[0].toUpperCase()+d.substr(1)}}(),this.transform2DSupport=!0,this.transform3DSupport=function(a){var d,e;return d=c.createElement("p"),e=void 0,c.body.insertBefore(d,null),"undefined"!=typeof d.style[a]&&(d.style[a]="translate3d(1px,1px,1px)",e=b.getComputedStyle(d).getPropertyValue(a)),c.body.removeChild(d),"undefined"!=typeof e&&e.length>0&&"none"!==e}(this.vendorPrefix.css+"transform"),this.setPositionAndScale=this.transform3DSupport?function(a,b,c){return b=b.toFixed(this.precision)+"px",c=c.toFixed(this.precision)+"px",this.css(a,this.vendorPrefix.js+"Transform","translate3d("+b+","+c+",0)")}:this.transform2DSupport?function(a,b,c){return b=b.toFixed(this.precision)+"px",c=c.toFixed(this.precision)+"px",this.css(a,this.vendorPrefix.js+"Transform","translate("+b+","+c+")")}:function(a,b,c){return b=b.toFixed(this.precision)+"px",c=c.toFixed(this.precision)+"px",a.style.left=b,a.style.top=c},this.onAnimationFrame=isNaN(parseFloat(this.limitX))||isNaN(parseFloat(this.limitY))?isNaN(parseFloat(this.limitX))?isNaN(parseFloat(this.limitY))?function(){return this.mx=this.ix*this.ew*this.scalarX,this.my=this.iy*this.eh*this.scalarY,this.vx+=(this.mx-this.vx)*this.frictionX,this.vy+=(this.my-this.vy)*this.frictionY,this.moveCircles(this.vx,this.vy),this.raf=requestAnimationFrame(this.onAnimationFrame)}:function(){return this.mx=this.ix*this.ew*this.scalarX,this.my=this.clamp(this.iy*this.eh*this.scalarY,-this.limitY,this.limitY),this.vx+=(this.mx-this.vx)*this.frictionX,this.vy+=(this.my-this.vy)*this.frictionY,this.moveCircles(this.vx,this.vy),this.raf=requestAnimationFrame(this.onAnimationFrame)}:function(){return this.mx=this.clamp(this.ix*this.ew*this.scalarX,-this.limitX,this.limitX),this.my=this.iy*this.eh*this.scalarY,this.vx+=(this.mx-this.vx)*this.frictionX,this.vy+=(this.my-this.vy)*this.frictionY,this.moveCircles(this.vx,this.vy),this.raf=requestAnimationFrame(this.onAnimationFrame)}:function(){return this.mx=this.clamp(this.ix*this.ew*this.scalarX,-this.limitX,this.limitX),this.my=this.clamp(this.iy*this.eh*this.scalarY,-this.limitY,this.limitY),this.vx+=(this.mx-this.vx)*this.frictionX,this.vy+=(this.my-this.vy)*this.frictionY,this.moveCircles(this.vx,this.vy),this.raf=requestAnimationFrame(this.onAnimationFrame)},this.onMouseDown=this.relativeInput&&this.clipRelativeInput?function(a){var b,c,d;return a.preventDefault(),this.enabled?void 0:(null!=a.changedTouches&&a.changedTouches.length>0&&(this.activeTouch=a.changedTouches[0].identifier),d=this.getCoordinatesFromEvent(a),b=d.clientX,c=d.clientY,b=this.clamp(b,this.ex,this.ex+this.ew),c=this.clamp(c,this.ey,this.ey+this.eh),this.fix=b,this.fiy=c,this.enable())}:function(a){var b,c,d;return a.preventDefault(),this.enabled?void 0:(null!=a.changedTouches&&a.changedTouches.length>0&&(this.activeTouch=a.changedTouches[0].identifier),d=this.getCoordinatesFromEvent(a),b=d.clientX,c=d.clientY,this.fix=b,this.fiy=c,this.enable())},this.onMouseMove=this.relativeInput&&this.clipRelativeInput?function(a){var b,c,d;return a.preventDefault(),this.moved||(g(this.element,"moved"),this.moved=!0),d=this.getCoordinatesFromEvent(a),b=d.clientX,c=d.clientY,b=this.clamp(b,this.ex,this.ex+this.ew),c=this.clamp(c,this.ey,this.ey+this.eh),this.ix=(b-this.ex-this.fix)/this.ew,this.iy=(c-this.ey-this.fiy)/this.eh,this.fix=b,this.fiy=c}:this.relativeInput?function(a){var b,c,d;return a.preventDefault(),this.moved||(g(this.element,"moved"),this.moved=!0),d=this.getCoordinatesFromEvent(a),b=d.clientX,c=d.clientY,this.ix=(b-this.ex-this.fix)/this.ew,this.iy=(c-this.ey-this.fiy)/this.eh,this.fix=b,this.fiy=c}:function(a){var b,c,d;return a.preventDefault(),this.moved||(g(this.element,"moved"),this.moved=!0),d=this.getCoordinatesFromEvent(a),b=d.clientX,c=d.clientY,this.ix=(b-this.fix)/this.ww,this.iy=(c-this.fiy)/this.wh,this.fix=b,this.fiy=c},this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onAnimationFrame=this.onAnimationFrame.bind(this),this.onWindowResize=this.onWindowResize.bind(this),this.initialise()}return a.prototype.extend=function(){var a,b,c,d,e;if(arguments.length>1){for(a=arguments[0],e=[],c=0,d=arguments.length;d>c;c++)b=arguments[c],e.push(function(b){var c,d;d=[];for(c in b)d.push(a[c]=b[c]);return d}(b));return e}},a.prototype.data=function(a,b){return this.deserialize(a.getAttribute("data-"+b))},a.prototype.deserialize=function(a){return"true"===a?!0:"false"===a?!1:"null"===a?null:!isNaN(parseFloat(a))&&isFinite(a)?parseFloat(a):a},a.prototype.initialise=function(){var a;return this.transform3DSupport&&this.accelerate(this.element),a=b.getComputedStyle(this.element),"static"===a.getPropertyValue("position")&&(this.element.style.position="relative"),b.addEventListener("mousedown",this.onMouseDown),b.addEventListener("mouseup",this.onMouseUp),b.addEventListener("touchstart",this.onMouseDown),b.addEventListener("touchend",this.onMouseUp),b.addEventListener("resize",this.onWindowResize),this.updateDimensions(),this.updateCircles()},a.prototype.updateCircles=function(){var a,b,c,d,e,f,g,h,i,j;if(this.circles=this.element.getElementsByClassName("circle-container"),this.numberOfCol=Math.ceil(Math.sqrt(2*this.circles.length)/2),this.numberOfCol<4)throw new Error("Need more element");for(e=0,d=-1,f=this,j=this.circles,g=function(a){return f.transform3DSupport&&f.accelerate(a),a.style.width=f.circleDiameter+"px",a.style.height=f.circleDiameter+"px",e%f.numberOfCol===0&&(d++,e=0),a.i=d,a.j=e,e++},h=0,i=j.length;i>h;h++)b=j[h],g(b);return this.numberOfRow=this.circles[this.circles.length-1].i+1,a=Math.floor(this.numberOfRow/2)-1,c=Math.floor(this.numberOfCol/2)-2,this.layoutCircles(a,c),this.cx=parseFloat(this.circles[c+this.numberOfCol*a].x),this.cy=parseFloat(this.circles[c+this.numberOfCol*a].y)},a.prototype.layoutCircles=function(a,b){var c,d,e,f,g,h;for(d=this,h=this.circles,e=function(c){var e;return c.y=14+5*(c.i-a),e=(c.i-a)%2===1||(c.i-a)%2===-1?5:-2,c.x=e+14*(c.j-b),c.y=c.y/34*(d.portrait?d.ew:d.eh),c.x=c.x/44*(d.portrait?d.eh:d.ew),d.setCirclePosition(c)},f=0,g=h.length;g>f;f++)c=h[f],e(c);return this.appeared(),this.miny=Math.min(parseFloat(this.circles[0].y)-parseFloat(this.circleDiameter)/2,-parseFloat(this.circleDiameter)/2),this.maxy=Math.max(parseFloat(this.circles[this.circles.length-1].y)+parseFloat(this.circleDiameter)/2,this.eh+parseFloat(this.circleDiameter)/2),this.ry=this.maxy-this.miny,this.minx=Math.min(parseFloat(Math.min(this.circles[0].x,this.circles[this.numberOfCol].x))-parseFloat(this.circleDiameter)/2,-parseFloat(this.circleDiameter)/2),this.maxx=Math.max(Math.max(this.circles[this.circles.length-1].x,this.circles[this.circles.length-1-this.numberOfCol].x)+parseFloat(this.circleDiameter),this.ew+parseFloat(this.circleDiameter)/2),this.rx=this.maxx-this.minx},a.prototype.appeared=function(){var a,b,d,e,f;return g(this.element,"appeared"),k(this.element,"moved"),this.moved=!1,b=""+this.vendorPrefix.css+"animation : appear 1s; "+this.vendorPrefix.css+"animation-delay: -400ms;",d="0% { "+this.vendorPrefix.css+"transform:translate3d("+(this.ew-this.circleDiameter)/2+"px, "+(this.eh-this.circleDiameter)/2+"px, 0); opacity: 0; } 40% { opacity: 0; }",a=function(a,b,c,d){return"insertRule"in a?a.insertRule(b+"{"+c+"}",d):"addRule"in a?a.addRule(b,c,d):void 0},c.styleSheets&&c.styleSheets.length?(a(c.styleSheets[0],"@"+this.vendorPrefix.css+"keyframes appear",d,0),a(c.styleSheets[0],"#circlesUI.appeared > .circle-container.circle-visible",b,0)):(e=c.createElement("style"),e.innerHTML="@"+this.vendorPrefix.css+"keyframes appear {"+d+"} #circlesUI.appeared > .circle-container.circle-visible {"+b,c.getElementsByTagName("head")[0].appendChild(e)),f=this,setTimeout(function(){return k(f.element,"appeared")},1e3)},a.prototype.updateDimensions=function(){return this.ww=b.innerWidth,this.wh=b.innerHeight,this.updateBounds(),this.portrait=this.eh>this.ew,this.circleDiameter=this.portrait?(6/34*this.ew).toFixed(this.precision):(6/34*this.eh).toFixed(this.precision),this.updateCircles()},a.prototype.updateBounds=function(){return this.bounds=this.element.getBoundingClientRect(),this.ex=this.bounds.left,this.ey=this.bounds.top,this.ew=this.bounds.width,this.eh=this.bounds.height},a.prototype.findCenterCircle=function(){var a,b,c,d,e,f,g,h;for(d=this,c=this.rx*this.rx+this.ry*this.ry,a=null,h=this.circles,e=function(b){var e;return e=(b.x-d.cx)*(b.x-d.cx)+(b.y-d.cy)*(b.y-d.cy),c>e?(c=e,a=b):void 0},f=0,g=h.length;g>f;f++)b=h[f],e(b);return a},a.prototype.moveCircles=function(a,b){var c,d,e,f,g,h;for(d=this,g=this.circles,h=[],e=0,f=g.length;f>e;e++)c=g[e],h.push(function(c){return c.x+=a,c.y+=b,c.x<d.minx?c.x+=d.rx*(1+Math.floor((d.minx-c.x)/d.rx)):c.x>d.maxx&&(c.x-=d.rx*(1+Math.floor((c.x-d.maxx)/d.rx))),c.y<d.miny?c.y+=d.ry*(1+Math.floor((d.miny-c.y)/d.ry)):c.y>d.maxy&&(c.y-=d.ry*(1+Math.floor((c.y-d.maxy)/d.ry))),d.setCirclePosition(c)}(c));return h},a.prototype.enable=function(){return this.enabled?void 0:(this.enabled=!0,b.addEventListener("mousemove",this.onMouseMove),b.addEventListener("touchmove",this.onMouseMove),this.raf=requestAnimationFrame(this.onAnimationFrame))},a.prototype.disable=function(){return this.enabled?(this.enabled=!1,b.removeEventListener("mousemove",this.onMouseMove),b.removeEventListener("touchmove",this.onMouseMove)):void 0},a.prototype.calibrate=function(a,b){return this.calibrateX=null!=a?a:this.calibrateX,this.calibrateY=null!=b?b:this.calibrateY},a.prototype.invert=function(a,b){return this.invertX=null!=a?a:this.invertX,this.invertY=null!=b?b:this.invertY},a.prototype.friction=function(a,b){return this.frictionX=null!=a?a:this.frictionX,this.frictionY=null!=b?b:this.frictionY},a.prototype.scalar=function(a,b){return this.scalarX=null!=a?a:this.scalarX,this.scalarY=null!=b?b:this.scalarY},a.prototype.limit=function(a,b){return this.limitX=null!=a?a:this.limitX,this.limitY=null!=b?b:this.limitY},a.prototype.clamp=function(a,b,c){return a=Math.max(a,b),Math.min(a,c)},a.prototype.css=function(a,b,c){return a.style[b]=c},a.prototype.accelerate=function(a){return this.css(a,this.vendorPrefix.transform,"translate3d(0,0,0)")},a.prototype.setCirclePosition=function(a){return a.x>1*this.circleDiameter/2&&a.x<this.ew-3*this.circleDiameter/2&&a.y>1*this.circleDiameter/3&&a.y<this.eh-3*this.circleDiameter/2?g(a,this.classBig):j(a,this.classBig)&&k(a,this.classBig),a.x>-this.circleDiameter&&a.x<this.ew+this.circleDiameter&&a.y>-this.circleDiameter&&a.y<this.eh+this.circleDiameter?g(a,this.classVisible):j(a,this.classVisible)&&k(a,this.classVisible),this.setPositionAndScale(a,a.x,a.y,1)},a.prototype.onWindowResize=function(){return this.updateDimensions()},a.prototype.getCoordinatesFromEvent=function(a){return this.getCoordinatesFromEvent=null!=a.touches&&null!=a.touches.length&&a.touches.length>0?function(a){var b,c,d;return b=function(a,b){var c,d,e;for(d=0,e=a.length;e>d;d++)if(c=a[d],b(c))return c},c=this,d=b(a.touches,function(a){return a.identifier===c.activeTouch}),{clientX:d.clientX,clientY:d.clientY}}:function(a){return{clientX:a.clientX,clientY:a.clientY}},this.getCoordinatesFromEvent(a)},a.prototype.onMouseUp=function(){var a;for(this.ix=0,this.iy=0,this.activeTouch=null,this.disable(),a=0;Math.abs(this.vx)>0&&Math.abs(this.vx)>0&&50>a;)this.raf=requestAnimationFrame(this.onAnimationFrame),a++;return cancelAnimationFrame(this.raf)},b[f]=a,a}()}(window,document)}.call(this),function(){var a,b,c,d,e,f;for(a=0,c=["ms","moz","webkit","o"],d=function(a){return window.requestAnimationFrame=window[a+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a+"CancelAnimationFrame"]||window[a+"CancelRequestAnimationFrame"]},e=0,f=c.length;f>e;e++)b=c[e],d(b);window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c,d,e;return c=(new Date).getTime(),e=Math.max(0,16-(c-a)),d=window.setTimeout(function(){return b(c+e)},e),a=c+e,d}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){return clearTimeout(a)})}.call(this),function(){!function(a){var b;return b=function(){function a(a){this.form=a,this.first_name=this.form.querySelector("#first_name"),this.last_name=this.form.querySelector("#last_name"),this.slug_name=this.form.querySelector("#slug_name"),this.birthday=this.form.querySelector("#birthday"),this.email=this.form.querySelector("#email"),this.password=this.form.querySelector("#password"),this.slug_changed=!1,this.onFirstNameBlur=this.onFirstNameBlur.bind(this),this.onLastNameBlur=this.onLastNameBlur.bind(this),this.onNamesChange=this.onNamesChange.bind(this),this.onSlugNameBlur=this.onSlugNameBlur.bind(this),this.onBirthdayBlur=this.onBirthdayBlur.bind(this),this.onPasswordBlur=this.onPasswordBlur.bind(this),this.onSubmit=this.onSubmit.bind(this),this.initialise()}return a.prototype.initialise=function(){return this.first_name.addEventListener("blur",this.onFirstNameBlur),this.last_name.addEventListener("blur",this.onLastNameBlur),this.first_name.addEventListener("input",this.onNamesChange),this.last_name.addEventListener("input",this.onNamesChange),this.slug_name.addEventListener("blur",this.onSlugNameBlur),this.birthday.addEventListener("blur",this.onBirthdayBlur),this.password.addEventListener("blur",this.onPasswordBlur),this.form.addEventListener("submit",this.onSubmit)},a.prototype.checkFirstName=function(){return this.first_name.value.length>1?(classie.hasClass(this.first_name,"error")&&classie.removeClass(this.first_name,"error"),!0):(classie.addClass(this.first_name,"error"),!1)},a.prototype.checkLastName=function(){return this.last_name.value.length>1?(classie.hasClass(this.last_name,"error")&&classie.removeClass(this.last_name,"error"),!0):(classie.addClass(this.last_name,"error"),!1)},a.prototype.checkPassword=function(){return this.password.value.length>5?(classie.hasClass(this.password,"error")&&classie.removeClass(this.password,"error"),!0):(classie.addClass(this.password,"error"),!1)},a.prototype.checkSlugName=function(){return this.slug_name.value.length>1&&this.checkSluggish()?(classie.hasClass(this.slug_name,"error")&&classie.removeClass(this.slug_name,"error"),!0):(classie.addClass(this.slug_name,"error"),!1)},a.prototype.checkSluggish=function(){var a;return a=/^[a-z0-9\-]*$/,a.test(this.slug_name.value)},a.prototype.checkBirthday=function(){var a,b;return b=/^[0-3][0-9][\/][0-1][0-9][\/][1-2][0-9]{3}$/,a=this.birthday.value.split("/"),b.test(this.birthday.value)&&null!=new Date(a[2],a[1]-1,a[0])?(classie.hasClass(this.birthday,"error")&&classie.removeClass(this.birthday,"error"),!0):(classie.addClass(this.birthday,"error"),!1)},a.prototype.generateSlug=function(){var a;return a=this.last_name.value.length>0&&this.first_name.value.length>0?this.first_name.value+"-"+this.last_name.value:this.first_name.value.length>0?this.first_name.value:this.last_name.value,a.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},a.prototype.onFirstNameBlur=function(){return this.checkFirstName()},a.prototype.onLastNameBlur=function(){return this.checkLastName()},a.prototype.onNamesChange=function(){return this.slug_changed?void 0:this.slug_name.value=this.generateSlug()},a.prototype.onSlugNameBlur=function(){return this.slug_changed=!0,this.checkSlugName()},a.prototype.onBirthdayBlur=function(){return this.checkBirthday()},a.prototype.onPasswordBlur=function(){return this.checkPassword()},a.prototype.onSubmit=function(a){return this.checkFirstName()&&this.checkLastName()&&this.checkSlugName()&&this.checkBirthday()&&this.checkPassword()?void 0:a.preventDefault()},a}(),a.Signup=b}(window,document)}.call(this);
